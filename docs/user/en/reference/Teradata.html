<html>
    <head>
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../book.css" type="text/css" />
        <title>Users Guide : Teradata</title>
    </head>
    <body BGCOLOR="#FFFFFF">
       <!-- Users Guide : Teradata -->
       <h3>Teradata</h3>
       <p>The Teradata Database is a commercial relational database (RDBMS) that specializes in parallel processing and scalability. From version 12.0, Teradata has added geospatial support, closely following the SQL/MM standard (SQL Multimedia and Applications Packages). Geospatial support was available through an add-on in version 12.0 and became standard in version 13.0.</p>

<p>uDig connects to a Teradata database via JDBC.</p>

<p>For more information on Teradata and the Teradata Database system, please go to <a href="http://www.teradata.com">http://www.teradata.com</a>.</p>

<h2><a name="Teradata-Compatibility"></a>Compatibility</h2>

<p>The uDig Teradata extension is compatible with 1.2.2 and higher. uDig can connect to Teradata databases version 12.0 or higher. Version 12.0 of the Teradata Database requires the optional geospatial extension to be installed.</p>

<h2><a name="Teradata-Issues%2FErrata"></a>Issues/Errata</h2>

<p>The version of the Teradata plugin that ships with uDig 1.2.2 has some issues that may cause performance issues with large data sets and a potential application freeze when editing features.  There is a patch to address these issues, which can be installed in the following way:</p>

<ul>
	<li>Follow the instructions to <a href="Finding new plugins.html" title="Finding new plugins">install a new plugin</a>.</li>
	<li>When asked for the site location (step 5) enter <a href="http://udig.refractions.net/files/update-teradata/">http://udig.refractions.net/files/update-teradata/</a></li>
	<li>After completing the wizard, restart uDig.</li>
</ul>


<p>This patch will be incorporated into all future releases of uDig.</p>

<h2><a name="Teradata-Read%2Fwriteaccess"></a>Read/write access</h2>

<p>The Teradata datastore in uDig supports full transactional capabilities, including feature creation, editing, and deleting.</p>

<p>To support editing, a table must have one of the following:</p>
<ul>
	<li>a primary key</li>
	<li>a unique primary index</li>
	<li>an identity (sequential) column</li>
</ul>


<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td> It is not recommended to solely use an identity column, as spatial index triggers are not supported when referencing an identity column.  See the section on Spatial Indexes for more details.</td></tr></table></div>

<h2><a name="Teradata-QueryBanding"></a>Query Banding</h2>

<p>Teradata connections in uDig utilize Query Banding. Query Banding is a feature which allows any application to associate context information with each query it issues to the database. In practice this can be used for purposes of workload management (i.e. request prioritization), debugging, and logging.</p>

<p>uDig sends the following information as part of a standard request:</p>
<ul>
	<li>Name of application (i.e. uDig)</li>
	<li>Authenticated username (if set up)</li>
	<li>Hostname (if available)</li>
	<li>Type of statement (i.e. "SELECT", "INSERT", "DELETE")</li>
</ul>


<p>The only details that can be modified from within uDig is the Name of application and the Connection Mode .&nbsp; See the <a href="Teradata page.html" title="Teradata page">Teradata page</a> for more details.</p>

<h2><a name="Teradata-Spatialindexes"></a>Spatial indexes</h2>

<p>uDig will read from a spatial index if its exists. The convention for a spatial index table name is:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">[TABLENAME]_[GEOMETRYCOLUMN]_idx</pre>
</div></div>
<p>So for a layer called "STATES" with a geometry column called "GEOM", the index table should be called <b>STATES_GEOM_idx</b>.</p>
<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Make sure to match the case of all tables and columns. If the geometry column is called "GEOM" (upper case) and the index created is called STATES_geom_idx (lower case), the index will not be properly linked to the table.</td></tr></table></div>
<p>This index table should contain two columns:</p>
<ul>
	<li>A column that maps to the primary key of the spatial data table</li>
	<li>The tessellation cell ID (cellid)</li>
</ul>


<p>The tessellation cell ID is the ID of the cell where that feature is contained.</p>

<h2><a name="Teradata-Geometrycolumn"></a>Geometry column</h2>

<p>As per the SQL/MM standard, in order to make a Teradata table spatially enabled, an entry needs to be created for that table in the <tt>geometry_columns</tt> table. This table is stored, like all other spatially-related tables, in the SYSSPATIAL database.</p>

<h2><a name="Teradata-Tessellation"></a>Tessellation</h2>

<p>Tessellation is the name of Teradata's spatial index. In order to activate tessellation for a given layer, an entry (row) needs to be placed in the <tt>SYSSPATIAL.tessellation</tt> table. This table should have the following schema:</p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Table name </th>
<th class='confluenceTh'> Type </th>
<th class='confluenceTh'> Description </th>
</tr>
<tr>
<th class='confluenceTh'> F_TABLE_SCHEMA </th>
<td class='confluenceTd'> varchar </td>
<td class='confluenceTd'> Name of the spatial database/schema containing the table </td>
</tr>
<tr>
<th class='confluenceTh'> F_TABLE_NAME </th>
<td class='confluenceTd'> varchar </td>
<td class='confluenceTd'> Name of the spatial table </td>
</tr>
<tr>
<th class='confluenceTh'> F_GEOMETRY_COLUMN </th>
<td class='confluenceTd'> varchar </td>
<td class='confluenceTd'> Column that contains the spatial data </td>
</tr>
<tr>
<th class='confluenceTh'> U_XMIN </th>
<td class='confluenceTd'> float </td>
<td class='confluenceTd'> Minimum X value for the tessellation universe </td>
</tr>
<tr>
<th class='confluenceTh'> U_YMIN </th>
<td class='confluenceTd'> float </td>
<td class='confluenceTd'> Minimum Y value for the tessellation universe </td>
</tr>
<tr>
<th class='confluenceTh'> U_XMAX </th>
<td class='confluenceTd'> float </td>
<td class='confluenceTd'> Maximum X value for the tessellation universe </td>
</tr>
<tr>
<th class='confluenceTh'> U_YMAX </th>
<td class='confluenceTd'> float </td>
<td class='confluenceTd'> Maximum Y value for the tessellation universe </td>
</tr>
<tr>
<th class='confluenceTh'> G_NX </th>
<td class='confluenceTd'> integer </td>
<td class='confluenceTd'> Number of X grids </td>
</tr>
<tr>
<th class='confluenceTh'> G_NY </th>
<td class='confluenceTd'> integer </td>
<td class='confluenceTd'> Number of Y grids </td>
</tr>
<tr>
<th class='confluenceTh'> LEVELS </th>
<td class='confluenceTd'> integer </td>
<td class='confluenceTd'> Number of levels in the grid </td>
</tr>
<tr>
<th class='confluenceTh'> SCALE </th>
<td class='confluenceTd'> float </td>
<td class='confluenceTd'> Scale value for the grid </td>
</tr>
<tr>
<th class='confluenceTh'> SHIFT </th>
<td class='confluenceTd'> float </td>
<td class='confluenceTd'> Shift value for the grid </td>
</tr>
</tbody></table>
<p>For more information about Tessellation, please see the Teradata documentation.</p>
<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>The tessellation table values are case sensitive and so must match the case of the tables and columns.</td></tr></table></div>

<h2><a name="Teradata-InstallingtheTeradataextension"></a>Installing the Teradata extension</h2>

<p>Teradata database support is not enabled by default and requires the Teradata drivers to be downloaded prior to use.</p>

<p>To get the Teradata drivers, please visit:  http://downloads.teradata.com/download/connectivity/jdbc-driver</p>

<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>You will need to log in to Teradata's site in order to download this artifact.</td></tr></table></div>

<p>Extract the contents of the archive to any convenient directory.  There should be two files in this archive:</p>

<ul>
	<li>terajdbc4.jar</li>
	<li>tdgssconfig.jar</li>
</ul>


<p>Then navigate to <b>Layer &gt; Add... &gt; Teradata</b>. You will be shown a dialog (see below). Insert the locations of the two files extracted above into the dialog box and then click <b>Restart</b>.</p>

<p><img src="download/attachments/13238969/td_drivers.png" align="absmiddle" border="0"/></p>

<p>On some installations, a second dialog may appear stating that a directory is not accessible to uDig.  If this occurs, make sure that uDig has write privileges to the installation directory, restart uDig, and try again.</p>

<p><img src="download/attachments/13238969/td_drivers_admin.png" align="absmiddle" border="0"/></p>

<p>After uDig restarts, navigate back to <b>Layer &gt; Add... &gt; Teradata</b>.  If everything was installed correctly, you will now be shown a dialog box for <b>Teradata Connection Settings.</b> Please continue on to the <a href="Teradata page.html" title="Teradata page">Teradata connection page</a> for details.</p>

<!--<small>(c) Copyright (c) 2004-2012 Refractions Research Inc. and others.</small>-->
    </body>
</html>
