<html>
    <head>
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../book.css" type="text/css" />
        <title>Users Guide : Processing the Geometry in a Shapefile</title>
    </head>
    <body BGCOLOR="#FFFFFF">
       <!-- Users Guide : Processing the Geometry in a Shapefile -->
       <h3>Processing the Geometry in a Shapefile</h3>
       <p>You can use the <b>Reshape</b> operation to modify the geometry column and then export the resulting scratch layer.</p>

<div>
<ul>
    <li><a href='#ProcessingtheGeometryinaShapefile-ConvertingPolygonstoPointsusingCentroid'>Converting Polygons to Points using Centroid</a></li>
    <li><a href='#ProcessingtheGeometryinaShapefile-ConvertingLinesorPointsintoPolygonsusingBuffer'>Converting Lines or Points into Polygons using Buffer</a></li>
</ul></div>

  <img src="http://udig.refractions.net/image/EN/ngrelc.gif">

<ul>
	<li><a href="Constraint Query Language.html" title="Constraint Query Language">Constraint Query Language</a></li>
</ul>


  <img src="http://udig.refractions.net/image/EN/ngrelr.gif">

<ul>
	<li><a href="Transform operation.html" title="Transform operation">Transform operation</a></li>
	<li><a href="Catalog view.html" title="Catalog view">Catalog view</a></li>
	<li><a href="Resource to Shapefile Wizard.html" title="Resource to Shapefile Wizard">Resource to Shapefile Wizard</a></li>
</ul>


<h1><a name="ProcessingtheGeometryinaShapefile-ConvertingPolygonstoPointsusingCentroid"></a>Converting Polygons to Points using Centroid</h1>

<ol>
	<li>Select the contents of your shapefile
	<ul>
		<li>Exapand the shapefile entry in the catalog view and select the contents</li>
		<li>Select the layer (if you happen to have the shape file on screen)</li>
	</ul>
	</li>
	<li>Run the <b>Transform</b> operations, this operation will show you a the current attributes being generated, along with their type and an expression used to calculate values.</li>
	<li>Select <b>the_geom</b> in the Transform table</li>
	<li>Define the expression used to generate your geometry value:
<div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>centroid(the_geom)</p>
</div></div></li>
	<li>Press <b>OK</b>. A new scratch entry containing the result of the operation has been added to the scratch service in the <b>Catalog view</b>.</li>
	<li>Right click on the above scratch entry in the catalog view and select <b>Export</b> to open the <a href="Export Wizard.html" title="Export Wizard">Export Wizard</a></li>
	<li>Choose <b>Resource to Shapefile</b> and press <b>Next&gt;</b></li>
	<li>Provide a destination directory for your new shapefile</li>
	<li>Ensure that your scratch entry is checked off for export</li>
	<li>Press <b>Finish</b></li>
	<li>The new shapefile is now available in the <b>Catalog view</b></li>
</ol>


<p>You can define additional columns using any CQL expression, please be advised that the shapefile format can only support one geometry column.</p>

<h1><a name="ProcessingtheGeometryinaShapefile-ConvertingLinesorPointsintoPolygonsusingBuffer"></a>Converting Lines or Points into Polygons using Buffer</h1>

<ol>
	<li>Select the contents of your shapefile
	<ul>
		<li>Exapand the shapefile entry in the catalog view and select the contents</li>
		<li>Select the layer (if you happen to have the shape file on screen)</li>
	</ul>
	</li>
	<li>Run the <b>Transform</b> operations, this operation will show you a the current attributes being generated, along with their type and an expression used to calculate values.</li>
	<li>Define the process desired for the <b>the_geom</b> expression:
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">buffer(the_geom,0.01)</pre>
</div></div></li>
	<li>Press <b>OK</b>. A new scratch entry containing the result of the operation has been added to the scratch service in the <b>Catalog view</b>.</li>
	<li>Right click on the above scratch entry in the catalog view and select <b>Export</b> to open the <a href="Export Wizard.html" title="Export Wizard">Export Wizard</a></li>
	<li>Choose <b>Resource to Shapefile</b> and press <b>Next&gt;</b></li>
	<li>Provide a destination directory for your new shapefile</li>
	<li>Ensure that your scratch entry is checked off for export</li>
	<li>Press <b>Finish</b></li>
	<li>The new shapefile is now available in the <b>Catalog view</b></li>
</ol>


<p>You can define additional columns using any CQL expression, please be advised that the shapefile format can only support one geometry column.</p>


<!--<small>(c) Copyright (c) 2004-2012 Refractions Research Inc. and others.</small>-->
    </body>
</html>
