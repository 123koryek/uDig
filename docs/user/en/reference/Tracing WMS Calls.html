<html>
    <head>
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../book.css" type="text/css" />
        <title>Users Guide : Tracing WMS Calls</title>
    </head>
    <body BGCOLOR="#FFFFFF">
       <!-- Users Guide : Tracing WMS Calls -->
       <h3>Tracing WMS Calls</h3>
       <p>Occasionally you will have trouble connecting to a WMS service; here is how to enable tracing.</p>
<div>
<ul>
    <li><a href='#TracingWMSCalls-TraceingWMSRequests'>Traceing WMS Requests</a></li>
<ul>
    <li><a href='#TracingWMSCalls-ExampleTracingInformation'>Example Tracing Information</a></li>
    <li><a href='#TracingWMSCalls-TroubleShootingaWMSServer'>Trouble Shooting a WMS Server</a></li>
    <li><a href='#TracingWMSCalls-MacOSX'>Mac OSX</a></li>
</ul>
</ul></div>


<h1><a name="TracingWMSCalls-TraceingWMSRequests"></a>Traceing WMS Requests</h1>

<ol>
	<li>Please use the the provided .options File. The ".options" file should be dropped into you uDig folder to enable additional tracing information.
	<ul>
		<li>Create the following file:
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedHeader panelHeader" style="border-bottom-width: 1px;"><b>.options</b></div><div class="preformattedContent panelContent">
<pre>#Master Tracing Options
#Tue Aug 05 14:56:31 PDT 2008
net.refractions.udig.catalog.wms/debug=true
net.refractions.udig.catalog.wms/debug/request=true
</pre>
</div></div></li>
		<li>Place it in your uDig folder (next to your udig.exe file): <br clear="all" /> C:\Program Files\uDig\1.1\eclipse</li>
	</ul>
	</li>
	<li>Now when you restart uDig additional messages will be added to your log. These messages show the Requests sent to the WMS service.</li>
	<li>Check the log for tracing information</li>
</ol>


<h2><a name="TracingWMSCalls-ExampleTracingInformation"></a>Example Tracing Information</h2>

<p>When connecting to the JPL server and choosing the blue marble layer the following trace was produced:</p>
<div class="panel" style="border-width: 1px;"><div class="panelContent">
<p>!ENTRY net.refractions.udig.catalog.internal.wms 4 0 2008-09-05 08:26:15.561<br/>
!MESSAGE GetCapabilities: <a href="http://wms.jpl.nasa.gov/wms.cgi?REQUEST=GetCapabilities&amp;VERSION=1.1.1&amp;SERVICE=WMS">http://wms.jpl.nasa.gov/wms.cgi?REQUEST=GetCapabilities&amp;VERSION=1.1.1&amp;SERVICE=WMS</a></p>

<p>!ENTRY net.refractions.udig.catalog.internal.wms 4 0 2008-09-05 08:26:24.781<br/>
!MESSAGE GetMap: <a href="http://wms.jpl.nasa.gov/wms.cgi?SERVICE=WMS&amp;LAYERS=BMNG&amp;EXCEPTIONS=application/vnd.ogc.se_xml&amp;FORMAT=image/png&amp;HEIGHT=357&amp;TRANSPARENT=TRUE&amp;REQUEST=GetMap&amp;BBOX=-180.0,-90.0,180.0,90.0&amp;WIDTH=714&amp;STYLES=default&amp;SRS=EPSG:4326&amp;VERSION=1.1.1">http://wms.jpl.nasa.gov/wms.cgi? SERVICE=WMS&amp;LAYERS=BMNG&amp;EXCEPTIONS=application/vnd.ogc.se_xml&amp; FORMAT=image/png&amp;HEIGHT=357&amp;TRANSPARENT=TRUE&amp;REQUEST=GetMap&amp;BBOX=-180.0,-90.0,180.0,90.0&amp;WIDTH=714&amp;STYLES=default&amp; SRS=EPSG:4326&amp;VERSION=1.1.1</a></p>
</div></div>

<p>The URLs mentioned during tracing can be cut and pasted into a browser to verify an error message, or see the same image that uDig displayed.</p>

<h2><a name="TracingWMSCalls-TroubleShootingaWMSServer"></a>Trouble Shooting a WMS Server</h2>

<p>Please keep the following in mind when connecting to a WMS. The URL you provide should be a valid <b>GetCapabilities</b> URL with the following elements:</p>
<ul class="alternate" type="square">
	<li>REQUEST=GetCapabilities: his is actually a requirement; uDig will supply it for you if needed.</li>
	<li>SERVICE=WMS: this is also a requirement - many servers speak several protocols</li>
	<li>VERSION=X.X.X: this is version of the WMS protocol you would like to use</li>
</ul>


<p>The uDig will enter into "version negotiation" with the server using the above information.</p>
<ol>
	<li>uDig will will request the GetCapabilities document with the above information</li>
	<li>The server will respond with a valid capabilities document that contains the "closest" version number the server can produce.</li>
	<li>Based on this response uDig may
	<ul>
		<li>Connect and ask you to choose a layer; or</li>
		<li>Change the VERSION and try again ...</li>
	</ul>
	</li>
</ol>


<h2><a name="TracingWMSCalls-MacOSX"></a>Mac OSX</h2>

<p>1. right click on uDig.app and choose "Show Package Contents"<br/>
2. Navigate to MacOS folder<br/>
3. Next the the file udig_internal.ini create the file ".options" as described above.</p>

<p>You can either review the application logs located (from the about udig screen); or start the application from the command line with:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>udig.app/Contents/MacOS/udig_internal -consoleLog
</pre>
</div></div>

  <img src="http://udig.refractions.net/image/EN/ngrelt.gif">

<p><a href="View Error Log and Configuration Details.html" title="View Error Log and Configuration Details">View Error Log and Configuration Details</a></p>


<!--<small>(c) Copyright (c) 2004-2012 Refractions Research Inc. and others.</small>-->
    </body>
</html>
